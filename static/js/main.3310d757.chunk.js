(this["webpackJsonpequations-solver"]=this["webpackJsonpequations-solver"]||[]).push([[0],{126:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),i=n(47),s=n.n(i),l=n(9),c=n(10),u=n(15),h=n(14),f=n(16),v=n(18),d=n.n(v),g=n(13);!function(e){e[e.BISECT=0]="BISECT",e[e.CHORD=1]="CHORD",e[e.TANGENT=2]="TANGENT",e[e.ITERATION=3]="ITERATION"}(a||(a={}));var p=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}},m=function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){}};window.evaluatex=d.a;var b,w=function(e){return e.on("formula").subscribe((function(e){try{E.evaluatex=d()(e,void 0,{latex:!0}),console.log(E.evaluatex({x:2}))}catch(t){E.evaluatex=null,console.log(t.toString().split("\n")[0])}})),e.on("eps").subscribe((function(){return x.solve()})),e.onAll().subscribe((function(){return m(e.getState())})),e},y={formula:"sin(x)",step:.01,eps:1e-4,solvingMethod:a.BISECT,scale:[100,100],offset:[.5,.5],precisePlot:!1},x={};try{b=d()(y.formula)}catch(V){}var E={evaluatex:b};p()||m(y),Object.assign(y,p());var O=Object(g.createStore)(y);w(O);var C=Object(g.connect)(O),k=(n(76),function(e){return O.set("solvingMethod")(parseInt(e.target.value))}),j=C((function(e){var t,n=e.store;return o.a.createElement("div",{className:"Control"},o.a.createElement("div",{className:"Control-panel"},o.a.createElement("select",{className:"Control-select",value:n.get("solvingMethod"),onChange:k},o.a.createElement("option",{value:a.BISECT},"\u041c\u0435\u0442\u043e\u0434 \u0431\u0438\u0441\u0435\u043a\u0446\u0438\u0438"),o.a.createElement("option",{value:a.CHORD},"\u041c\u0435\u0442\u043e\u0434 \u0445\u043e\u0440\u0434"),o.a.createElement("option",{value:a.TANGENT},"\u041c\u0435\u0442\u043e\u0434 \u043a\u0430\u0441\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445")),o.a.createElement("button",{onClick:x.draw,className:"Control-button"},"\u0413\u0440\u0430\u0444\u0438\u043a"),o.a.createElement("button",{onClick:x.solve,className:"Control-button"},"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c"),o.a.createElement("span",{className:"Control-panel-checkbox"},o.a.createElement("input",{type:"checkbox",checked:n.get("precisePlot"),onChange:(t="precisePlot",function(e){return O.set(t)(e.target.checked)})}),o.a.createElement("span",null,"\u0422\u043e\u0447\u043d\u043e\u0435 \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0435"))))})),S=n(8),N=(n(78),function(e){return function(t){return O.set(e)(parseFloat(t.latex()))}}),T=function(e){return O.set("formula")(e.latex())},M=function(e){return E.mathField=e},P=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={editRaw:!1},n.toggleRaw=function(){n.setState({editRaw:!n.state.editRaw})},n}return Object(f.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.store;return o.a.createElement("div",{className:"Formula"},o.a.createElement(S.MathQuill,{className:"object"!==typeof E.evaluatex?"":"Formula-error",latex:e.get("formula"),onChange:T,mathquillDidMount:M}),o.a.createElement(S.MathQuillStatic,{latex:"=0,\\ e="}),o.a.createElement(S.MathQuill,{latex:e.get("eps").toString(),onChange:N("eps")}),o.a.createElement(S.MathQuillStatic,{latex:",\\ \\Delta="}),o.a.createElement(S.MathQuill,{latex:e.get("step").toString(),onChange:N("step")}))}}]),t}(o.a.Component),A=function(e){var t=e.roots;return o.a.createElement(o.a.Fragment,null,t.map((function(e,n){var a=Math.abs(Math.log10(O.get("eps")))||1,r="x_{".concat(n+1,"}=")+ +e.toFixed(a)+(n<t.length-1?",\\ ":"");return o.a.createElement(S.MathQuillStatic,{key:e.toFixed(a),latex:r})})))},D=C(P),F=n(7),I=n(48),R=n(11);n(124);var W,B,q,z=n(19),G=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,null,[{key:a.BISECT,value:function(e){var t,n=Object(z.a)(e,2),a=n[0],r=n[1],o=O.get("eps"),i=function(e){return E.evaluatex({x:e})};do{var s=i(a),l=i(r);if(0===s)return a;if(0===l)return r;var c=i(t=(a+r)/2);Math.sign(s)!==Math.sign(c)?r=t:a=t}while(r-a>o);return t}},{key:a.ITERATION,value:function(e){var t=Object(z.a)(e,2);return(t[0]+t[1])/2}},{key:a.TANGENT,value:function(t){for(var n,a=Object(z.a)(t,2),r=a[0],o=a[1],i=O.get("eps"),s=0;Math.abs(o-r)>i;){if(o=r=o-(n=o,E.evaluatex({x:n})/e.derivative(o)),s>10)return o;s++}return o}},{key:a.CHORD,value:function(e){for(var t=Object(z.a)(e,2),n=t[0],a=t[1],r=O.get("eps"),o=function(e){return E.evaluatex({x:e})};Math.abs(a-n)>r;)a=(n=a-(a-n)*o(a)/(o(a)-o(n)))+(n-a)*o(n)/(o(n)-o(a));return a}},{key:"derivative",value:function(e){var t=O.get("eps"),n=function(e){return E.evaluatex({x:e})};return(n(e+t)-n(e))/t}}]),e}(),L=(n(126),[/Android/,/webOS/,/iPhone/,/iPad/,/iPod/,/BlackBerry/,/Windows Phone/].some((function(e){return e.test(navigator.userAgent)}))),H=C((q=L?1e3:500,W=function(e,t,n){return n.value=function(e,t){var n=!1,a=null,r=null;return function o(){if(n)return a=arguments,void(r=this);e.apply(this,[arguments]),n=!0,setTimeout((function(){n=!1,a&&(o.apply(r,a),a=r=null)}),t)}}(n.value,q),n},B=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={width:.9*window.innerWidth,height:.6*window.innerHeight,points:[],roots:[]},n.resizeCanvas=n.resizeCanvas.bind(Object(F.a)(n)),n.resetTransform=n.resetTransform.bind(Object(F.a)(n)),n.handleDrag=n.handleDrag.bind(Object(F.a)(n)),n.handleScroll=n.handleScroll.bind(Object(F.a)(n)),x.draw=n.drawCanvas.bind(Object(F.a)(n)),x.solve=n.solve.bind(Object(F.a)(n)),n}return Object(f.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resizeCanvas),this.drawCanvas()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeCanvas)}},{key:"drawCanvas",value:function(){console.log("Draw called"),this.setState({points:this.calculatePoints()})}},{key:"resizeCanvas",value:function(){this.setState({width:.9*window.innerWidth,height:.6*window.innerHeight}),this.drawCanvas()}},{key:"handleScroll",value:function(e){e.evt.preventDefault();var t=e.target.getLayer();if(t&&"graph"===t.attrs.id){var n=["Control","Alt","Shift"].map((function(t){return e.evt.getModifierState(t)})),a=t.getStage(),r=t.scale(),o={x:a.getPointerPosition().x/r.x-t.x()/r.x,y:a.getPointerPosition().y/r.y-t.y()/r.y},i={x:n[0]||n[1]?e.evt.deltaY<0?1.1*r.x:r.x/1.1:r.x,y:n[0]||n[2]?e.evt.deltaY<0?1.1*r.y:r.y/1.1:r.y},s={x:-(o.x-a.getPointerPosition().x/i.x)*i.x,y:-(o.y-a.getPointerPosition().y/i.y)*i.y};this.props.store.set("scale")([i.x,i.y]),this.props.store.set("offset")([s.x/this.state.width,s.y/this.state.height])}this.drawCanvas()}},{key:"handleDrag",value:function(e){var t=e.target.getAbsolutePosition();this.props.store.set("offset")([t.x/this.state.width,t.y/this.state.height]),this.drawCanvas()}},{key:"resetTransform",value:function(){this.props.store.set("offset")([.5,.5]),this.props.store.set("scale")([100,100]),this.drawCanvas()}},{key:"calculatePoints",value:function(){if(E.evaluatex){for(var e=this.props.store,t=e.get("offset"),n=this.state.width/e.get("scale")[0],a=[-n*t[0],n*(1-t[0])],r=e.get("precisePlot")?e.get("step"):(a[1]-a[0])/this.state.width,o=[],i=a[0];i<a[1];i+=r)try{o.push([i,E.evaluatex({x:i})])}catch(s){console.log("errrr")}return o}return[]}},{key:"solve",value:function(){var e=this.calculatePoints(),t=[];e.forEach((function(n,a){var r=e[a+1];r&&r[1]*n[1]<=0&&t.push([n[0],r[0]])})),console.log(t);var n=t.map(G[this.props.store.get("solvingMethod")]).filter(Number.isFinite);console.log(n),this.setState({points:e,roots:n})}},{key:"render",value:function(){var e=this.state,t=this.props.store,n={x:e.width*t.get("offset")[0],y:e.height*t.get("offset")[1]},a={x:t.get("scale")[0],y:t.get("scale")[1]},r={scale:a},i={strokeWidth:2/Math.sqrt(a.x*a.y)},s=R.Stage,l=R.Layer,c=R.Group,u=R.Rect,h=R.Line,f=R.Text;return o.a.createElement("div",{className:"Graph"},o.a.createElement(s,Object.assign({onWheel:this.handleScroll,className:"Graph-stage"},e),o.a.createElement(l,Object.assign({onDblTap:this.resetTransform,onDblClick:this.resetTransform,draggable:!0,onDragEnd:this.handleDrag},r,{id:"graph"},n),o.a.createElement(c,null,o.a.createElement(u,{fill:"transparent",x:-n.x/a.x,y:-n.y/a.y,width:e.width/a.x,height:e.height/a.y}),o.a.createElement(h,Object.assign({stroke:"black"},i,{points:[-9e3,0,9e3,0]})),o.a.createElement(h,Object.assign({stroke:"black"},i,{points:[0,-9e3,0,9e3]}))),o.a.createElement(c,null,o.a.createElement(h,Object.assign({stroke:"black"},i,{points:e.points.flat(),scaleY:-1})))),o.a.createElement(l,{id:"text"},o.a.createElement(f,{onClick:this.resetTransform,text:"react-konva H:"+e.height.toFixed(2)+" W:"+e.width.toFixed(2)+" S:"+t.get("scale").map((function(e){return e.toFixed(2)}))+" O:"+t.get("offset").map((function(e){return e.toFixed(2)}))+" C:"+Object.values(n).map((function(e){return e.toFixed(2)}))+" B:"+[-e.width/t.get("scale")[0],e.width/t.get("scale")[1]].map((function(e){return e.toFixed(2)}))+" P:"+e.points.length+" Click here to reset.",fontSize:12,fontFamily:'"Lucida Console", Monaco, monospace'}))),o.a.createElement("div",{className:"Graph-roots"},o.a.createElement(A,{roots:e.roots})))}}]),t}(o.a.Component),Object(I.a)(B.prototype,"drawCanvas",[W],Object.getOwnPropertyDescriptor(B.prototype,"drawCanvas"),B.prototype),B)),Q=(n(127),["\\pi","\u2610^2","x^{\u2610}","\\sqrt{\u2610}","\\sqrt[\u2610]{\u2610}","\\frac{\u2610}{\u2610}","\\log_{\u2610}"]),J=function(e){return function(){return E.mathField&&E.mathField.write(e.replace(/\u2610/g,""))}},U=function(e,t){return o.a.createElement("div",{key:"btn".concat(t),className:"MathBoard-buttons",onClick:J(e)},o.a.createElement(S.MathQuillStatic,{latex:e}))},Y=C((function(e){e.store;return o.a.createElement("div",{className:"MathBoard"},Q.map(U))})),_=(n(128),C(function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement(H,null),o.a.createElement(D,null),o.a.createElement(j,null),o.a.createElement(Y,null)))}}]),t}(o.a.Component))),$=(n(129),n(130),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function K(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(o.a.createElement(_,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/equations-solver",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/equations-solver","/service-worker.js");$?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):K(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):K(t,e)}))}}()},49:function(e,t,n){e.exports=n(131)},76:function(e,t,n){},78:function(e,t,n){}},[[49,1,2]]]);
//# sourceMappingURL=main.3310d757.chunk.js.map