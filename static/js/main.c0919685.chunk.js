(this["webpackJsonpequations-solver"]=this["webpackJsonpequations-solver"]||[]).push([[0],{126:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),i=n(47),s=n.n(i),l=n(7),c=n(8),u=n(12),h=n(11),d=n(13),f=n(18),v=n.n(f),p=n(16);!function(e){e[e.DICHOTOMY=0]="DICHOTOMY",e[e.SECANT=1]="SECANT",e[e.NEWTON=2]="NEWTON",e[e.ITERATION=3]="ITERATION"}(a||(a={}));var g=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}},m=function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){}};window.evaluatex=v.a;var b=function(e){return e.on("formula").subscribe((function(e){try{C.evaluatex=v()(e,void 0,{latex:!0}),console.log(C.evaluatex({x:2}))}catch(t){C.evaluatex=null,console.log(t.toString().split("\n")[0])}})),e.onAll().subscribe((function(){return m(e.getState())})),e},w={formula:"sin(x)",step:.01,eps:1e-4,solvingMethod:a.DICHOTOMY,scale:[100,100],offset:[.5,.5],precisePlot:!1};g()||m(w),Object.assign(w,g());var y=Object(p.createStore)(w);b(y);var O,x=Object(p.connect)(y),E={};try{O=v()(w.formula)}catch(V){}var C={evaluatex:O},k=(n(76),function(e){return y.set("solvingMethod")(parseInt(e.target.value))}),j=x(function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.props.store;return r.a.createElement("div",{className:"Control"},r.a.createElement("div",{className:"Control-panel"},r.a.createElement("select",{className:"Control-select",value:t.get("solvingMethod"),onChange:k},r.a.createElement("option",{value:a.DICHOTOMY},"\u041c\u0435\u0442\u043e\u0434 \u043f\u043e\u043b\u043e\u0432\u0438\u043d\u043d\u043e\u0433\u043e \u0434\u0435\u043b\u0435\u043d\u0438\u044f"),r.a.createElement("option",{disabled:!0,value:a.SECANT},"\u041c\u0435\u0442\u043e\u0434 \u0445\u043e\u0440\u0434 (\u0441\u043a\u043e\u0440\u043e...)"),r.a.createElement("option",{disabled:!0,value:a.NEWTON},"\u041c\u0435\u0442\u043e\u0434 \u043a\u0430\u0441\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445 (\u0441\u043a\u043e\u0440\u043e...)"),r.a.createElement("option",{disabled:!0,value:a.ITERATION},"\u041c\u0435\u0442\u043e\u0434 \u043f\u0440\u043e\u0441\u0442\u044b\u0445 \u0438\u0442\u0435\u0440\u0430\u0446\u0438\u0439 (\u0441\u043a\u043e\u0440\u043e...)")),r.a.createElement("button",{onClick:E.draw,className:"Control-button"},"\u0413\u0440\u0430\u0444\u0438\u043a"),r.a.createElement("button",{onClick:E.solve,className:"Control-button"},"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c"),r.a.createElement("span",{className:"Control-panel-checkbox"},r.a.createElement("input",{type:"checkbox",checked:t.get("precisePlot"),onChange:(e="precisePlot",function(t){return y.set(e)(t.target.checked)})}),r.a.createElement("span",null,"\u0422\u043e\u0447\u043d\u043e\u0435 \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0435"))))}}]),t}(r.a.Component)),N=n(10),S=(n(78),function(e){return function(t){return y.set(e)(parseFloat(t.latex()))}}),T=function(e){return y.set("formula")(e.latex())},M=function(e){return C.mathField=e},P=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={editRaw:!1},n.toggleRaw=function(){n.setState({editRaw:!n.state.editRaw})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.store;return r.a.createElement("div",{className:"Formula"},r.a.createElement(N.MathQuill,{className:"object"!==typeof C.evaluatex?"":"Formula-error",latex:e.get("formula"),onChange:T,mathquillDidMount:M}),r.a.createElement(N.MathQuillStatic,{latex:"=0,\\ e="}),r.a.createElement(N.MathQuill,{latex:e.get("eps").toString(),onChange:S("eps")}),r.a.createElement(N.MathQuillStatic,{latex:",\\ \\Delta="}),r.a.createElement(N.MathQuill,{latex:e.get("step").toString(),onChange:S("step")}))}}]),t}(r.a.Component),A=function(e){var t=e.roots;return r.a.createElement(r.a.Fragment,null,t.map((function(e,n){var a=Math.abs(Math.log10(y.get("eps"))),o="x_{".concat(n+1,"}=")+ +e.toFixed(a)+(n<t.length-1?",\\ ":"");return r.a.createElement(N.MathQuillStatic,{key:"r".concat(n),latex:o})})))},D=x(P),I=n(9),W=n(48),F=n(14);n(124);var R,H,Y,z=n(19),L=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,null,[{key:a.DICHOTOMY,value:function(t){var n=Object(z.a)(t,2),o=n[0],r=n[1],i=(o+r)/2;if(r-o>y.get("eps")){var s=C.evaluatex({x:r}),l=C.evaluatex({x:i});return 0===l?i:l*s<0?e[a.DICHOTOMY]([i,r]):e[a.DICHOTOMY]([o,i])}return i}},{key:a.ITERATION,value:function(e){var t=Object(z.a)(e,2),n=t[0],a=t[1];return console.log("iterations"),(n+a)/2}},{key:a.NEWTON,value:function(e){var t=Object(z.a)(e,2),n=t[0],a=t[1];return console.log("newton"),(n+a)/2}},{key:a.SECANT,value:function(e){var t=Object(z.a)(e,2),n=t[0],a=t[1];return console.log("secant"),(n+a)/2}}]),e}(),B=(n(126),[/Android/,/webOS/,/iPhone/,/iPad/,/iPod/,/BlackBerry/,/Windows Phone/].some((function(e){return e.test(navigator.userAgent)}))),Q=x((Y=B?1e3:500,R=function(e,t,n){return n.value=function(e,t){var n=!1,a=null,o=null;return function r(){if(n)return a=arguments,void(o=this);e.apply(this,[arguments]),n=!0,setTimeout((function(){n=!1,a&&(r.apply(o,a),a=o=null)}),t)}}(n.value,Y),n},H=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={width:.9*window.innerWidth,height:.6*window.innerHeight,points:[],roots:[]},n.resizeCanvas=n.resizeCanvas.bind(Object(I.a)(n)),n.resetTransform=n.resetTransform.bind(Object(I.a)(n)),n.handleDrag=n.handleDrag.bind(Object(I.a)(n)),n.handleScroll=n.handleScroll.bind(Object(I.a)(n)),E.draw=n.drawCanvas.bind(Object(I.a)(n)),E.solve=n.solve.bind(Object(I.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resizeCanvas),this.drawCanvas()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeCanvas)}},{key:"drawCanvas",value:function(){console.log("Draw called"),this.setState({points:this.calculatePoints()})}},{key:"resizeCanvas",value:function(){this.setState({width:.9*window.innerWidth,height:.6*window.innerHeight}),this.drawCanvas()}},{key:"handleScroll",value:function(e){e.evt.preventDefault();var t=e.target.getLayer();if(t&&"graph"===t.attrs.id){var n=["Control","Alt","Shift"].map((function(t){return e.evt.getModifierState(t)})),a=t.getStage(),o=t.scale(),r={x:a.getPointerPosition().x/o.x-t.x()/o.x,y:a.getPointerPosition().y/o.y-t.y()/o.y},i={x:n[0]||n[1]?e.evt.deltaY<0?1.1*o.x:o.x/1.1:o.x,y:n[0]||n[2]?e.evt.deltaY<0?1.1*o.y:o.y/1.1:o.y},s={x:-(r.x-a.getPointerPosition().x/i.x)*i.x,y:-(r.y-a.getPointerPosition().y/i.y)*i.y};this.props.store.set("scale")([i.x,i.y]),this.props.store.set("offset")([s.x/this.state.width,s.y/this.state.height])}this.drawCanvas()}},{key:"handleDrag",value:function(e){var t=e.target.getAbsolutePosition();this.props.store.set("offset")([t.x/this.state.width,t.y/this.state.height]),this.drawCanvas()}},{key:"resetTransform",value:function(){this.props.store.set("offset")([.5,.5]),this.props.store.set("scale")([100,100]),this.drawCanvas()}},{key:"calculatePoints",value:function(){if(C.evaluatex){for(var e=this.props.store,t=e.get("offset"),n=this.state.width/e.get("scale")[0],a=[-n*t[0],n*(1-t[0])],o=e.get("precisePlot")?e.get("step"):(a[1]-a[0])/this.state.width,r=[],i=a[0];i<a[1];i+=o)try{r.push([i,C.evaluatex({x:i})])}catch(s){console.log("errrr")}return r}return[]}},{key:"solve",value:function(){var e=this.calculatePoints(),t=[];e.forEach((function(n,a){var o=e[a+1];o&&o[1]*n[1]<=0&&t.push([n[0],o[0]])})),console.log(t);var n=t.map(L[this.props.store.get("solvingMethod")]).filter(Number.isFinite);console.log(n),this.setState({points:e,roots:n})}},{key:"render",value:function(){var e=this.state,t=this.props.store,n={x:e.width*t.get("offset")[0],y:e.height*t.get("offset")[1]},a={x:t.get("scale")[0],y:t.get("scale")[1]},o={scale:a},i={strokeWidth:2/Math.sqrt(a.x*a.y)},s=F.Stage,l=F.Layer,c=F.Group,u=F.Rect,h=F.Line,d=F.Text;return r.a.createElement("div",{className:"Graph"},r.a.createElement(s,Object.assign({onWheel:this.handleScroll,className:"Graph-stage"},e),r.a.createElement(l,Object.assign({onDblClick:this.resetTransform,draggable:!0,onDragEnd:this.handleDrag},o,{id:"graph"},n),r.a.createElement(c,null,r.a.createElement(u,{fill:"transparent",x:-n.x/a.x,y:-n.y/a.y,width:e.width/a.x,height:e.height/a.y}),r.a.createElement(h,Object.assign({stroke:"black"},i,{points:[-9e3,0,9e3,0]})),r.a.createElement(h,Object.assign({stroke:"black"},i,{points:[0,-9e3,0,9e3]}))),r.a.createElement(c,null,r.a.createElement(h,Object.assign({stroke:"black"},i,{points:e.points.flat(),scaleY:-1})))),r.a.createElement(l,{id:"text"},r.a.createElement(d,{onClick:this.resetTransform,text:"react-konva H:"+e.height.toFixed(2)+" W:"+e.width.toFixed(2)+" S:"+t.get("scale").map((function(e){return e.toFixed(2)}))+" O:"+t.get("offset").map((function(e){return e.toFixed(2)}))+" C:"+Object.values(n).map((function(e){return e.toFixed(2)}))+" B:"+[-e.width/t.get("scale")[0],e.width/t.get("scale")[1]].map((function(e){return e.toFixed(2)}))+" P:"+e.points.length+" Click here to reset.",fontSize:12,fontFamily:'"Lucida Console", Monaco, monospace'}))),r.a.createElement("div",{className:"Graph-roots"},r.a.createElement(A,{roots:e.roots})))}}]),t}(r.a.Component),Object(W.a)(H.prototype,"drawCanvas",[R],Object.getOwnPropertyDescriptor(H.prototype,"drawCanvas"),H.prototype),H)),q=(n(127),["\\pi","\u2610^2","x^{\u2610}","\\sqrt{\u2610}","\\sqrt[\u2610]{\u2610}","\\frac{\u2610}{\u2610}","\\log_{\u2610}"]),G=function(e){return function(){return C.mathField&&C.mathField.write(e.replace(/\u2610/g,""))}},J=function(e,t){return r.a.createElement("div",{key:"btn".concat(t),className:"MathBoard-buttons",onClick:G(e)},r.a.createElement(N.MathQuillStatic,{latex:e}))},U=x((function(e){e.store;return r.a.createElement("div",{className:"MathBoard"},q.map(J))})),_=(n(128),x(function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(Q,null),r.a.createElement(D,null),r.a.createElement(j,null),r.a.createElement(U,null)))}}]),t}(r.a.Component))),$=(n(129),n(130),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function K(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(r.a.createElement(_,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/solver",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/solver","/service-worker.js");$?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):K(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):K(t,e)}))}}()},49:function(e,t,n){e.exports=n(131)},76:function(e,t,n){},78:function(e,t,n){}},[[49,1,2]]]);
//# sourceMappingURL=main.c0919685.chunk.js.map