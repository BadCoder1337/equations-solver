(this["webpackJsonpequations-solver"]=this["webpackJsonpequations-solver"]||[]).push([[0],{129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),i=n(18),s=n.n(i),l=n(8),c=n(9),u=n(13),h=n(12),d=n(14),f=n(23),v=n(19),p=n.n(v),g=n(16);!function(e){e[e.BISECT=0]="BISECT",e[e.CHORD=1]="CHORD",e[e.TANGENT=2]="TANGENT",e[e.ITERATION=3]="ITERATION"}(a||(a={}));var m=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}},y=function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){}};window.evaluatex=p.a;var b=function(e){return e.on("formula").subscribe((function(e){try{C.evaluatex=p()(e,void 0,{latex:!0}),console.log(C.evaluatex({x:2}))}catch(t){C.evaluatex=null,console.log(t.toString().split("\n")[0])}})),e.on("eps").subscribe((function(){return k.solve()})),e.onAll().subscribe((function(){return y(e.getState())})),e},x={formula:"sin(x)",step:.01,eps:1e-4,solvingMethod:a.BISECT,scale:[100,100],offset:[.5,.5],precisePlot:!1,debug:!1};m()||y(x);var w,E=Object(f.a)({},x,{},m()),k={};try{w=p()(E.formula)}catch(re){}var C={evaluatex:w},O=Object(g.createStore)(E);b(O);var N=Object(g.connect)(O),j=(n(78),function(e){return O.set("solvingMethod")(parseInt(e.target.value))}),S=function(e){return function(t){return O.set(e)(t.target.checked)}},M=N((function(e){var t=e.store;return o.a.createElement("div",{className:"Control"},o.a.createElement("div",{className:"Control-panel"},o.a.createElement("select",{className:"Control-select",value:t.get("solvingMethod"),onChange:j},o.a.createElement("option",{value:a.BISECT},"\u041c\u0435\u0442\u043e\u0434 \u0431\u0438\u0441\u0435\u043a\u0446\u0438\u0438"),o.a.createElement("option",{value:a.CHORD},"\u041c\u0435\u0442\u043e\u0434 \u0445\u043e\u0440\u0434"),o.a.createElement("option",{value:a.TANGENT},"\u041c\u0435\u0442\u043e\u0434 \u043a\u0430\u0441\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445")),o.a.createElement("button",{onClick:k.draw,className:"Control-button"},"\u0413\u0440\u0430\u0444\u0438\u043a"),o.a.createElement("button",{onClick:k.solve,className:"Control-button"},"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c"),o.a.createElement("button",{onClick:k.save,className:"Control-button"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")),o.a.createElement("div",{className:"Control-panel"},o.a.createElement("span",{className:"Control-panel-checkbox"},o.a.createElement("input",{type:"checkbox",checked:t.get("precisePlot"),onChange:S("precisePlot")}),o.a.createElement("span",null,"\u0422\u043e\u0447\u043d\u043e\u0435 \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0435")),o.a.createElement("span",{className:"Control-panel-checkbox"},o.a.createElement("input",{type:"checkbox",checked:t.get("debug"),onChange:S("debug")}),o.a.createElement("span",null,"\u041e\u0442\u043b\u0430\u0434\u043a\u0430"))))})),A=n(7),F=(n(80),function(e){return function(t){return O.set(e)(parseFloat(t.latex()))}}),P=function(e){return O.set("formula")(e.latex())},T=function(e){return C.mathField=e},D=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={editRaw:!1},n.toggleRaw=function(){n.setState({editRaw:!n.state.editRaw})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.store;return o.a.createElement("div",{className:"Formula"},o.a.createElement(A.MathQuill,{className:"object"!==typeof C.evaluatex?"":"Formula-error",latex:e.get("formula"),onChange:P,mathquillDidMount:T}),o.a.createElement(A.MathQuillStatic,{latex:"=0,\\ e="}),o.a.createElement(A.MathQuill,{latex:e.get("eps").toString(),onChange:F("eps")}),o.a.createElement(A.MathQuillStatic,{latex:",\\ \\Delta="}),o.a.createElement(A.MathQuill,{latex:e.get("step").toString(),onChange:F("step")}))}}]),t}(o.a.Component),I=function(e){var t=e.roots;return o.a.createElement(o.a.Fragment,null,t.map((function(e,n){var a=Math.abs(Math.log10(O.get("eps")))||1,r="x_{".concat(n+1,"}=")+ +e.toFixed(a)+(n<t.length-1?",\\ ":"");return o.a.createElement(A.MathQuillStatic,{key:e.toFixed(a),latex:r})})))},W=N(D),R=n(10),L=n(30),B=n(11),Q=n(20),q=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,null,[{key:a.BISECT,value:function(e){var t,n=Object(Q.a)(e,2),a=n[0],r=n[1],o=O.get("eps"),i=function(e){return C.evaluatex({x:e})};do{var s=i(a),l=i(r);if(0===s)return a;if(0===l)return r;var c=i(t=(a+r)/2);Math.sign(s)!==Math.sign(c)?r=t:a=t}while(r-a>o);return t}},{key:a.ITERATION,value:function(e){var t=Object(Q.a)(e,2);return(t[0]+t[1])/2}},{key:a.TANGENT,value:function(t){for(var n,a=Object(Q.a)(t,2),r=a[0],o=a[1],i=O.get("eps"),s=0;Math.abs(o-r)>i;){if(o=r=o-(n=o,C.evaluatex({x:n})/e.derivative(o)),s>10)return o;s++}return o}},{key:a.CHORD,value:function(e){for(var t=Object(Q.a)(e,2),n=t[0],a=t[1],r=O.get("eps"),o=function(e){return C.evaluatex({x:e})};Math.abs(a-n)>r;)a=(n=a-(a-n)*o(a)/(o(a)-o(n)))+(n-a)*o(n)/(o(n)-o(a));return a}},{key:"derivative",value:function(e){var t=O.get("eps"),n=function(e){return C.evaluatex({x:e})};return(n(e+t)-n(e))/t}}]),e}(),z=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).defaultNode=null,n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.renderPortal()}},{key:"componentDidUpdate",value:function(){this.renderPortal()}},{key:"componentWillUnmount",value:function(){s.a.unmountComponentAtNode(this.defaultNode||this.props.node),this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null}},{key:"renderPortal",value:function(){this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode));var e=this.props.children;s.a.render(o.a.createElement(o.a.Fragment,null,e),this.props.node||this.defaultNode)}},{key:"render",value:function(){return null}}]),t}(o.a.Component);n(127);function G(e){return function(t,n,a){return a.value=function(e,t){var n=!1,a=null,r=null;return function o(){if(n)return a=arguments,void(r=this);e.apply(this,[arguments]),n=!0,setTimeout((function(){n=!1,a&&(o.apply(r,a),a=r=null)}),t)}}(a.value,e),a}}n(129);var H,U,J,Y,_,X=[/Android/,/webOS/,/iPhone/,/iPad/,/iPod/,/BlackBerry/,/Windows Phone/].some((function(e){return e.test(navigator.userAgent)})),$=N((H=G(X?1e3:500),U=G(X?1e3:200),_=Y=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).ref=null,n.state=t.defaultState,n.MQLabel=function(e){var t=e.i,a=e.x,r=e.y,i={left:n.center.x+n.stage.container().offsetLeft+n.state.width*a/n.range.x,top:n.center.y+n.stage.container().offsetTop+n.state.height*r/n.range.y};return o.a.createElement(A.MathQuillStatic,{style:Object(f.a)({position:"absolute",backgroundColor:"white"},i),latex:"x_{".concat(t+1,"}")})},n.componentArrayFactory=function(e,t){return function(){return new Array(Math.round(n.range[t])+1).fill(null).map((function(e,a){return Math.floor(n.corners[t][0])+a})).map((function(a){return e(a,t,n.scale,n.strokeWidth)}))}},n.Lines={x:n.componentArrayFactory(t.ItemLine,"x"),y:n.componentArrayFactory(t.ItemLine,"y")},n.Numbers={x:n.componentArrayFactory(t.ItemNumber,"x"),y:n.componentArrayFactory(t.ItemNumber,"y")},n.resizeCanvas=n.resizeCanvas.bind(Object(R.a)(n)),n.reset=n.reset.bind(Object(R.a)(n)),n.handleDrag=n.handleDrag.bind(Object(R.a)(n)),n.handleScroll=n.handleScroll.bind(Object(R.a)(n)),k.draw=n.drawCanvas.bind(Object(R.a)(n)),k.solve=n.solve.bind(Object(R.a)(n)),k.save=n.save.bind(Object(R.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resizeCanvas),this.drawCanvas()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeCanvas)}},{key:"drawCanvas",value:function(){console.log("Draw called"),this.setState({points:this.calculatePoints()})}},{key:"resizeCanvas",value:function(){this.setState({width:.9*window.innerWidth,height:.6*window.innerHeight}),this.drawCanvas()}},{key:"handleScroll",value:function(e){e.evt.preventDefault();var t=e.target.getLayer();if("graph"===(null===t||void 0===t?void 0:t.attrs.id)){var n=["Control","Alt","Shift"].map((function(t){return e.evt.getModifierState(t)})),a=t.getStage(),r=t.scale(),o={x:a.getPointerPosition().x/r.x-t.x()/r.x,y:a.getPointerPosition().y/r.y-t.y()/r.y},i={x:n[0]||n[1]?e.evt.deltaY<0?1.05*r.x:r.x/1.05:r.x,y:n[0]||n[2]?e.evt.deltaY<0?1.05*r.y:r.y/1.05:r.y},s={x:-(o.x-a.getPointerPosition().x/i.x)*i.x,y:-(o.y-a.getPointerPosition().y/i.y)*i.y};this.props.store.set("scale")([i.x,i.y]),this.props.store.set("offset")([s.x/this.state.width,s.y/this.state.height])}this.drawCanvas(),null!==this.state.roots&&this.solve()}},{key:"handleDrag",value:function(e){switch(e.type){case"dragend":var t=e.target.getAbsolutePosition();this.props.store.set("offset")([t.x/this.state.width,t.y/this.state.height]),this.setState({dragging:!1}),this.drawCanvas(),null!==this.state.roots&&this.solve();break;case"dragstart":this.setState({dragging:!0})}}},{key:"reset",value:function(){this.props.store.set("offset")(x.offset),this.props.store.set("scale")(x.scale),this.setState({roots:null}),this.drawCanvas()}},{key:"calculatePoints",value:function(){if(C.evaluatex){for(var e=this.props.store,t=e.get("precisePlot")?e.get("step"):(this.corners.x[1]-this.corners.x[0])/this.state.width,n=[],a=this.corners.x[0];a<this.corners.x[1];a+=t)try{n.push([a,C.evaluatex({x:a})])}catch(r){console.log("errrr")}return n}return[]}},{key:"solve",value:function(){var e=this.calculatePoints(),t=[];e.forEach((function(n,a){var r=e[a+1];r&&r[1]*n[1]<=0&&t.push([n[0],r[0]])})),console.log(t);var n=t.map(q[this.props.store.get("solvingMethod")]).filter(Number.isFinite);console.log(n),this.setState({points:e,roots:n})}},{key:"save",value:function(){var e=this.stage.toDataURL({pixelRatio:2,x:0,y:0}),t=document.createElement("a");t.download="plot.png",t.href=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)}},{key:"render",value:function(){var e=this,t=B.Stage,n=B.Layer,a=B.Group,r=B.Rect,i=B.Line,s=B.Text;return o.a.createElement("div",{className:"Graph"},o.a.createElement(t,Object.assign({ref:function(t){return e.ref=t},onWheel:this.handleScroll,className:"Graph-stage"},this.state),o.a.createElement(n,Object.assign({onDblTap:this.reset,onDblClick:this.reset,draggable:!0,onDragStart:this.handleDrag,onDragEnd:this.handleDrag,scale:this.scale,id:"graph"},this.center),o.a.createElement(a,null,o.a.createElement(r,{fill:"transparent",x:-this.center.x/this.scale.x,y:-this.center.y/this.scale.y,width:this.state.width/this.scale.x,height:this.state.height/this.scale.y}),this.Lines.x(),this.Numbers.x(),this.Lines.y(),this.Numbers.y(),o.a.createElement(z,null,(this.state.roots&&!this.state.dragging?this.state.roots:[]).map((function(t,n){var a={x:t-.1,y:-.5,i:n};return o.a.createElement(e.MQLabel,Object.assign({key:t},a))})))),o.a.createElement(a,null,o.a.createElement(i,{stroke:"black",strokeWidth:this.strokeWidth.x,points:this.state.points.flat(),scaleY:-1}))),o.a.createElement(n,{visible:this.store.get("debug"),id:"debug"},o.a.createElement(s,{onClick:this.reset,text:"react-konva\nH:"+this.state.height.toFixed(2)+" W:"+this.state.width.toFixed(2)+"\nS:"+this.store.get("scale").map((function(e){return e.toFixed(2)}))+"\nO:"+this.store.get("offset").map((function(e){return e.toFixed(2)}))+"\nC:"+Object.values(this.center).map((function(e){return e.toFixed(2)}))+"\nBx:"+this.corners.x.map((function(e){return e.toFixed(2)}))+" By:"+this.corners.y.map((function(e){return e.toFixed(2)}))+"\nRx:"+this.range.x.toFixed(2)+" Ry:"+this.range.y.toFixed(2)+"\nSx:"+this.strokeWidth.x.toFixed(3)+" Sy:"+this.strokeWidth.y.toFixed(3)+"\nP:"+this.state.points.length+"\nDouble-click to reset.",fontSize:12,fontFamily:'"Lucida Console", Monaco, monospace'}))),o.a.createElement("div",{className:"Graph-roots"},o.a.createElement(I,{roots:this.state.roots||[]})))}},{key:"store",get:function(){return this.props.store}},{key:"center",get:function(){var e=this.state,t=this.store;return{x:e.width*t.get("offset")[0],y:e.height*t.get("offset")[1]}}},{key:"range",get:function(){return{x:this.state.width/this.store.get("scale")[0],y:this.state.height/this.store.get("scale")[1]}}},{key:"corners",get:function(){var e=this.store.get("offset");return{x:[-this.range.x*e[0],this.range.x*(1-e[0])],y:[-this.range.y*e[1],this.range.y*(1-e[1])]}}},{key:"scale",get:function(){return{x:this.store.get("scale")[0],y:this.store.get("scale")[1]}}},{key:"strokeWidth",get:function(){return{x:2/this.scale.x,y:2/this.scale.y}}},{key:"stage",get:function(){var e;return null===(e=this.ref)||void 0===e?void 0:e.getStage()}}]),t}(o.a.Component),Y.defaultState={width:.9*window.innerWidth,height:.6*window.innerHeight,points:[],roots:null,dragging:!1},Y.ItemLine=function(e,t,n,a){return o.a.createElement(B.Line,{key:e,stroke:"black",strokeWidth:a[t]/(e?3:1),points:"x"===t?[e,-9e3,e,9e3]:[-9e3,e,9e3,e]})},Y.ItemNumber=function(e,t,n,a){return o.a.createElement(B.Text,{key:e,x:("x"===t?e:0)+.1*x.scale[0]/n.x,y:("x"===t?0:e)+.1*x.scale[1]/n.y,scaleX:.3*x.scale[0]/n.x,scaleY:.3*x.scale[1]/n.y,fontSize:1,text:+e.toFixed(1)+""})},J=_,Object(L.a)(J.prototype,"drawCanvas",[H],Object.getOwnPropertyDescriptor(J.prototype,"drawCanvas"),J.prototype),Object(L.a)(J.prototype,"solve",[U],Object.getOwnPropertyDescriptor(J.prototype,"solve"),J.prototype),J)),K=(n(130),["\\pi","\u2610^2","x^{\u2610}","\\sqrt{\u2610}","\\sqrt[\u2610]{\u2610}","\\frac{\u2610}{\u2610}","\\log_{\u2610}"]),V=function(e){return function(){var t;return null===(t=C.mathField)||void 0===t?void 0:t.write(e.replace(/\u2610/g,""))}},Z=function(e,t){return o.a.createElement("div",{key:"btn".concat(t),className:"MathBoard-buttons",onClick:V(e)},o.a.createElement(A.MathQuillStatic,{latex:e}))},ee=N((function(e){e.store;return o.a.createElement("div",{className:"MathBoard"},K.map(Z))})),te=(n(131),N(function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement($,null),o.a.createElement(W,null),o.a.createElement(M,null),o.a.createElement(ee,null),o.a.createElement("div",{className:"App-footer"},"\u0420\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439:\xa0",o.a.createElement("a",{href:"https://github.com/BadCoder1337/equations-solver"},"equations-solver"),"\xa0 \u0410\u0432\u0442\u043e\u0440:\xa0",o.a.createElement("a",{href:"https://github.com/BadCoder1337"},"BadCoder1337"),"\xa0 \u0421\u0434\u0435\u043b\u0430\u043d\u043e\xa0\u0441\xa0\u043f\u043e\u043c\u043e\u0449\u044c\u044e\xa0",o.a.createElement("a",{href:"https://typescriptlang.org"},"TypeScript"),"\xa0&\xa0",o.a.createElement("a",{href:"https://reactjs.org/"},"React")))}}]),t}(o.a.Component))),ne=(n(132),n(133),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function ae(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),(null===t||void 0===t?void 0:t.onUpdate)&&t.onUpdate(e)):(console.log("Content is cached for offline use."),(null===t||void 0===t?void 0:t.onSuccess)&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(o.a.createElement(te,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/equations-solver",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/equations-solver","/service-worker.js");ne?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ae(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ae(t,e)}))}}()},50:function(e,t,n){e.exports=n(134)},78:function(e,t,n){},80:function(e,t,n){}},[[50,1,2]]]);
//# sourceMappingURL=main.044cef55.chunk.js.map